<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Конверты бюджета</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <main class="container">
    <fieldset class="block">
      <legend>Добавить конверт</legend>
<form id="add-envelope-form" style="display:flex; flex-direction:column; gap:12px;">
  <div style="display:flex; gap:10px;">
    <input type="text" id="envelope-name" placeholder="Название" style="flex:1;">
    <input type="text" id="envelope-comment" placeholder="Комментарий" style="flex:1;">
  </div>
  <div style="display:flex; gap:10px; align-items:center;">
    <input type="checkbox" id="envelope-has-goal" style="width:18px; height:18px;">
    <span>Цель</span>
    <input type="number" id="envelope-goal" min="0" step="1" placeholder="Сумма" style="flex:1; min-width:0; display:none; text-align:right;">
  </div>
  <div style="display:flex; gap:10px; align-items:center;">
    <input type="checkbox" id="envelope-distribution" style="width:18px; height:18px;">
    <span>Распределение</span>
    <span id="envelope-percent-label" style="display:none; min-width:38px;">0%</span>
    <input type="range" id="envelope-percent" min="0" max="100" step="1" value="0" style="flex:1; min-width:0; display:none;">
  </div>
  <div style="display:flex; gap:10px; justify-content:flex-end; align-items:center;">
<div id="distribution-settings-wrapper" class="distribution-settings collapsed">
  <button type="button" id="toggle-distribution-settings" class="round-btn light" style="align-self: flex-start; margin-bottom: 6px;">
    <span data-lucide="settings"></span>
    <span style="font-size:16px; margin-left:6px;">Настроить распределение</span>
    <span id="distribution-arrow" style="margin-left:6px; font-size:18px;">&#9660;</span>
  </button>
  <div id="distribution-settings-content" style="display:none; margin-top: 10px;"></div>
</div>
   
 <button id="cancel-edit-btn" type="button" style="display:none; width:48px; height:48px; background:#f7931e; border:none; border-radius:50%; align-items:center; justify-content:center;">
      <span data-lucide="x"></span>
    </button>
    <button type="submit" class="round-btn green" style="width:48px; height:48px;">
      <span data-lucide="check"></span>
    </button>
  </div>
</form>
    </fieldset>

    <div class="controls row" style="gap: 12px; justify-content: space-between; margin-top: 24px;">
      <button id="distribute-income" class="primary-btn">➕ Добавить доход</button>
         </div>

    <div id="envelope-list" class="section-list" style="margin-top: 16px;"></div>
  </main>

  <nav class="main-bottom-menu">
    <a href="index.html" class="menu-btn" title="Mini Budget">
      <span class="menu-icon"><span data-lucide="car"></span></span>
    </a>
    <a href="envelopes.html" class="menu-btn active" title="Конверты">
      <span class="menu-icon"><span data-lucide="mail"></span></span>
    </a>
  </nav>

  <script src="envelopes-app.js"></script>
  <script>lucide.createIcons();</script>
</body>
</html>
