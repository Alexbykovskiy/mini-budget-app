<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Конверты бюджета</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <main class="container">
    <fieldset class="block">
      <legend>Добавить конверт</legend>
<form id="add-envelope-form" style="display:flex; flex-direction:column; gap:12px;">

  <!-- Первая строка: Название (узкое) + Комментарий (шире) -->
  <div style="display:flex; gap:10px;">
    <input type="text" id="envelope-name" placeholder="Название" style="flex:1 1 120px; max-width:160px;">
    <input type="text" id="envelope-comment" placeholder="Комментарий" style="flex:2 1 200px;">
  </div>

  <!-- Вторая строка: Чекбокс Цель + поле суммы если чекнут -->
  <div style="display:flex; align-items:center; gap:8px;">
    <input type="checkbox" id="envelope-has-goal" style="width:18px; height:18px;">
    <span>Цель</span>
    <input type="number" id="envelope-goal" min="0" step="1" placeholder="Сумма" style="width:90px; margin-left:8px; display:none;">
  </div>

  <!-- Третья строка: Чекбокс распределения + бегунок если чекнут -->
  <div style="display:flex; align-items:center; gap:8px;">
    <input type="checkbox" id="envelope-distribution" style="width:18px; height:18px;">
    <span>Участвовать в распределении</span>
    <input type="range" id="envelope-percent" min="0" max="100" step="1" value="0" style="width:90px; margin-left:8px; display:none;">
    <span id="envelope-percent-label" style="display:none; min-width:32px;">0%</span>
  </div>

  <!-- Кнопка только с галочкой -->
  <button type="submit" class="round-btn green" style="width:48px; height:48px; align-self:flex-end;">
    <span data-lucide="check"></span>
  </button>
</form>
    </fieldset>

    <div class="controls row" style="gap: 12px; justify-content: space-between; margin-top: 24px;">
      <button id="distribute-income" class="primary-btn">➕ Добавить доход</button>
      <button onclick="openDistributionEditor()" class="gray-btn">⚙️ Настроить проценты</button>
    </div>

    <div id="envelope-list" class="section-list" style="margin-top: 16px;"></div>
  </main>

  <nav class="main-bottom-menu">
    <a href="index.html" class="menu-btn" title="Mini Budget">
      <span class="menu-icon"><span data-lucide="car"></span></span>
    </a>
    <a href="envelopes.html" class="menu-btn active" title="Конверты">
      <span class="menu-icon"><span data-lucide="mail"></span></span>
    </a>
  </nav>

  <script src="envelopes-app.js"></script>
  <script>lucide.createIcons();</script>
</body>
</html>
